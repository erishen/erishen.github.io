!function(t,n){"object"==typeof module&&"object"==typeof module.exports?module.exports=n(t):n(t)}("undefined"!=typeof window?window:this,function(l){var i={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"},a={},c={parseDict:function(){if(l.pinyin_dict_firstletter&&(a.firstletter=pinyin_dict_firstletter),l.pinyin_dict_notone)for(var t in a.notone={},a.py2hz=pinyin_dict_notone,pinyin_dict_notone)for(var n=0,e=(i=pinyin_dict_notone[t]).length;n<e;n++)a.notone[i[n]]||(a.notone[i[n]]=t);if(l.pinyin_dict_withtone){a.withtone={};var i;for(t=0,e=(i=pinyin_dict_withtone.split(",")).length;t<e;t++)a.withtone[String.fromCharCode(t+19968)]=i[t];if(l.pinyin_dict_notone)a.py2hz=pinyin_dict_notone;else{var r,o,f=c.removeTone(pinyin_dict_withtone).split(","),p={};for(t=0,e=f.length;t<e;t++){o=String.fromCharCode(t+19968),r=f[t].split(" ");for(n=0;n<r.length;n++)p[r[n]]=(p[r[n]]||"")+o}a.py2hz=p}}},getPinyin:function(t,n,e,i){if(!t||/^ +$/g.test(t))return"";n=null==n?" ":n,e=null==e||e,i=null!=i&&i;var r=[];if(a.withtone){for(var o="",f=0,p=t.length;f<p;f++){(h=a.withtone[t[f]])?(i||(h=h.replace(/ .*$/g,"")),e||(h=this.removeTone(h)),o&&(r.push(o),o=""),r.push(h)):!t[f]||/^ +$/g.test(t[f])?o&&(r.push(o),o=""):o+=t[f]}o&&(r.push(o),o="")}else{if(!a.notone)throw"抱歉，未找到合适的拼音字典文件！";for(o="",f=0,p=t.length;f<p;f++){var h,u=t.charAt(f);(h=a.notone[u])?(o&&(r.push(o),o=""),r.push(h)):!u||/^ +$/g.test(u)?o&&(r.push(o),o=""):o+=u}o&&(r.push(o),o="")}return i?l.pinyin_dict_polyphone?function(t,n,e,i){var r=l.pinyin_dict_polyphone,o=r[t];if(o){o=o.split(" ");for(var f=0;f<o.length;f++)n[f]=o[f]||n[f],i||(n[f]=c.removeTone(n[f]));return n.join(e)}for(f=0;f<t.length;f++){o="";for(var p=0;p<7&&f+p<t.length&&/^[\u2E80-\u9FFF]+$/.test(t[f+p]);p++){o+=t[f+p];var h=r[o];if(h){h=h.split(" ");for(var u=0;u<=p;u++)h[u]&&(n[f+u]=i?h[u]:c.removeTone(h[u]));break}}}for(f=0;f<n.length;f++)n[f]=n[f].replace(/ .*$/g,"");return n.join(e)}(t,r,n,e):s(r," ",n):r.join(n)},getFirstLetter:function(t,n){if(n=null!=n&&n,!t||/^ +$/g.test(t))return"";if(a.firstletter){for(var e=[],i=0;i<t.length;i++){var r=t.charCodeAt(i),o=t.charAt(i);19968<=r&&r<=40869&&(o=a.firstletter.all.charAt(r-19968),n&&(o=a.firstletter.polyphone[r]||o)),e.push(o)}return n?s(e,"",""):e.join("")}var f=this.getPinyin(t," ",!1,n);f=f instanceof Array?f:[f];for(e=[],i=0;i<f.length;i++)e.push(f[i].replace(/(^| )(\w)\w*/g,function(t,n,e){return e.toUpperCase()}));return n?u(e):e[0]},getHanzi:function(t){if(!a.py2hz)throw"抱歉，未找到合适的拼音字典文件！";return a.py2hz[this.removeTone(t)]||""},getSameVoiceWord:function(t,n){return this.getHanzi(this.getPinyin(t," ",!1))},removeTone:function(t){return t.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,function(t){return i[t][0]})},getTone:function(t){var n={};for(var e in i)n[i[e]]=e;return(t||"").replace(/[a-z]\d/g,function(t){return n[t]||t})}};function s(t,n,e){n=n||"";for(var i=[""],r=[],o=0;o<t.length;o++){r=[];for(var f=t[o].split(n),p=0;p<f.length;p++)for(var h=0;h<i.length;h++)r.push(i[h]+(i[h]?e:"")+f[p]);i=r}return u(i)}function u(t){for(var n=[],e={},i=0;i<t.length;i++){var r=typeof t[i]+t[i];e[r]||(n.push(t[i]),e[r]=!0)}return n}c.parseDict(),c.dict=a,l.pinyinUtil=c});